<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Untitled</title>
    <link rel="stylesheet" href="./style.css">

  </head>
    
  <body>
  <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jezzy Trades - Pet Grooming Booking</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg: hsl(222, 47%, 6%);
      --fg: hsl(210, 40%, 96%);
      --primary: hsl(217, 91%, 60%);
      --muted: hsl(215, 20%, 65%);
      --border: hsl(222, 20%, 22%);
      --secondary: hsl(222, 30%, 18%);
      --glass: hsla(222, 30%, 100%, 0.12);
      --glass-border: hsla(222, 30%, 100%, 0.25);
      --radius: 0.75rem;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, hsl(222, 47%, 4%), hsl(222, 47%, 8%), hsl(221, 83%, 25%));
      color: var(--fg);
      min-height: 100vh;
      padding: 2rem 1rem;
    }

    .form-container {
      max-width: 480px;
      margin: 0 auto;
    }

    h1 { text-align: center; font-size: 1.8rem; margin-bottom: 1rem; }

    .glass-section {
      background: hsla(0, 0%, 0%, 0.25);
      border-radius: 1rem;
      padding: 1rem;
      margin-bottom: 1rem;
    }

    .section-title {
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--muted);
      margin-bottom: 0.75rem;
    }

    input, textarea, select, button {
      font-family: inherit;
      font-size: 0.9rem;
      color: var(--fg);
      width: 100%;
      padding: 0.6rem 0.75rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: hsla(222, 30%, 18%, 0.5);
      outline: none;
      margin-bottom: 0.5rem;
    }

    input::placeholder, textarea::placeholder { color: var(--muted); }
    textarea { min-height: 80px; resize: vertical; }

    .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; }
    .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 0.5rem; }

    .checkbox-row {
      display: flex; align-items: center; gap: 0.75rem;
      cursor: pointer; padding: 0.25rem 0;
    }
    .checkbox-row input[type="checkbox"] {
      width: 18px; height: 18px; margin: 0; accent-color: var(--primary);
    }
    .checkbox-row .price { color: var(--muted); margin-left: auto; }

    .total-box {
      text-align: center; padding: 1rem;
      border-radius: 1rem;
      background: hsla(217, 91%, 60%, 0.2);
      border: 1px solid hsla(217, 91%, 60%, 0.3);
      font-size: 1.5rem; font-weight: 700;
      margin-bottom: 1rem;
    }

    .submit-btn {
      background: linear-gradient(to right, var(--primary), hsl(210, 90%, 65%));
      color: var(--bg); border: none; font-weight: 700;
      font-size: 1.1rem; padding: 0.9rem; cursor: pointer;
      border-radius: var(--radius);
      transition: opacity 0.2s;
    }
    .submit-btn:hover { opacity: 0.9; }
    .submit-btn:disabled { opacity: 0.5; cursor: not-allowed; }

    .extras-line {
      display: flex; justify-content: space-between;
      font-size: 0.85rem; opacity: 0.8;
    }

    /* Receipt */
    .receipt-overlay {
      position: fixed; inset: 0;
      background: rgba(0,0,0,0.7);
      display: flex; align-items: center; justify-content: center;
      z-index: 100; padding: 1rem;
    }
    .receipt {
      background: #faf9f6; color: #222;
      width: 100%; max-width: 360px;
      border-radius: 0.5rem; padding: 1.5rem;
      font-family: 'Courier New', monospace;
      animation: receipt-print 0.8s ease-out forwards;
      max-height: 90vh; overflow-y: auto;
    }
    .receipt h2 { text-align: center; font-size: 1.2rem; margin-bottom: 0.25rem; }
    .receipt .subtitle { text-align: center; font-size: 0.75rem; color: #888; margin-bottom: 1rem; }
    .receipt hr { border: none; border-top: 1px dashed #ccc; margin: 0.75rem 0; }
    .receipt .line { display: flex; justify-content: space-between; font-size: 0.85rem; padding: 0.15rem 0; }
    .receipt .total-line { font-weight: 700; font-size: 1rem; }
    .receipt .paw { text-align: center; font-size: 2rem; margin-top: 0.75rem; animation: paw-bounce 0.6s ease-in-out; }
    .receipt .close-btn {
      display: block; margin: 1rem auto 0; background: #222; color: #fff;
      border: none; padding: 0.5rem 1.5rem; border-radius: 0.5rem;
      cursor: pointer; font-size: 0.85rem;
    }

    @keyframes receipt-print {
      0% { transform: translateY(-40px); opacity: 0; max-height: 0; }
      100% { transform: translateY(0); opacity: 1; max-height: 800px; }
    }
    @keyframes paw-bounce {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.2) rotate(-10deg); }
    }
  </style>
</head>
<body>

<div class="form-container">
  <form id="bookingForm">
    <h1>üêæ Grooming Booking</h1>

    <div class="glass-section">
      <div class="section-title">Owner Info</div>
      <input id="ownerName" placeholder="Owner Name" required />
      <input id="email" type="email" placeholder="Email" required />
      <input id="phone" type="tel" placeholder="Phone Number" required />
    </div>

    <div class="glass-section">
      <div class="section-title">Pet Info</div>
      <input id="petName" placeholder="Pet Name" />
      <div class="grid-3">
        <select id="petType"><option>Dog</option><option>Cat</option></select>
        <select id="petGender"><option>Male</option><option>Female</option></select>
        <input id="petAge" type="number" placeholder="Age" min="0" />
      </div>
    </div>

    <div class="glass-section">
      <div class="section-title">Services</div>
      <label class="checkbox-row"><input type="checkbox" value="Wash" data-price="80" /><span>Wash</span><span class="price">R80</span></label>
      <label class="checkbox-row"><input type="checkbox" value="Wash & Cut" data-price="150" /><span>Wash & Cut</span><span class="price">R150</span></label>
      <label class="checkbox-row"><input type="checkbox" value="Full Groom" data-price="180" /><span>Full Groom</span><span class="price">R180</span></label>
      <label class="checkbox-row"><input type="checkbox" value="Nail Clipping" data-price="40" /><span>Nail Clipping</span><span class="price">R40</span></label>
    </div>

    <div class="glass-section">
      <div class="section-title">Date & Time</div>
      <div class="grid-2">
        <input id="date" type="date" required />
        <select id="time" required>
          <option value="">Pick time</option>
          <option>08:00</option><option>08:30</option><option>09:00</option><option>09:30</option>
          <option>10:00</option><option>10:30</option><option>11:00</option><option>11:30</option>
          <option>12:00</option><option>12:30</option><option>13:00</option><option>13:30</option>
          <option>14:00</option><option>14:30</option><option>15:00</option><option>15:30</option>
          <option>16:00</option><option>16:30</option>
        </select>
      </div>
    </div>

    <div class="glass-section">
      <div class="section-title">Extra Requests</div>
      <textarea id="extras" placeholder="e.g. deworming, flea treatment, teeth cleaning, special shampoo..."></textarea>
      <div id="extrasPreview"></div>
    </div>

    <div class="glass-section">
      <div class="section-title">Payment Method</div>
      <select id="payment">
        <option>Pay Now</option><option>Pay Later</option><option>Pay Cash</option>
      </select>
    </div>

    <div class="total-box">Total: R<span id="totalDisplay">0</span></div>
    <button type="submit" class="submit-btn" id="submitBtn">Confirm Booking</button>
  </form>
</div>

<div class="receipt-overlay" id="receiptOverlay" style="display:none">
  <div class="receipt" id="receiptContent"></div>
</div>

<script>
const EXTRAS_KEYWORDS = [
  { keywords: ["deworm"], label: "Deworming", price: 60 },
  { keywords: ["flea"], label: "Flea Treatment", price: 75 },
  { keywords: ["tick"], label: "Tick Removal", price: 65 },
  { keywords: ["teeth", "dental"], label: "Teeth Cleaning", price: 50 },
  { keywords: ["ear"], label: "Ear Cleaning", price: 30 },
  { keywords: ["nail paint", "nail polish"], label: "Nail Painting", price: 35 },
  { keywords: ["shed", "de-shed"], label: "De-shedding", price: 70 },
  { keywords: ["shampoo", "medicated"], label: "Special Shampoo", price: 40 },
  { keywords: ["perfume", "cologne", "fragrance"], label: "Perfume/Cologne Spray", price: 25 },
  { keywords: ["anal", "gland"], label: "Anal Gland Expression", price: 45 },
  { keywords: ["hot spot", "skin"], label: "Skin/Hot Spot Treatment", price: 55 },
  { keywords: ["blueberry", "facial"], label: "Blueberry Facial", price: 35 },
  { keywords: ["paw"], label: "Paw Balm Treatment", price: 20 },
  { keywords: ["mat", "detangle"], label: "Mat Removal/Detangling", price: 60 },
  { keywords: ["sanitary", "hygiene"], label: "Sanitary Trim", price: 30 },
  { keywords: ["bandana", "bow"], label: "Bandana/Bow Add-on", price: 15 },
];

function parseExtras(text) {
  if (!text.trim()) return [];
  const lower = text.toLowerCase();
  const matched = [];
  EXTRAS_KEYWORDS.forEach(e => {
    if (e.keywords.some(k => lower.includes(k))) matched.push(e);
  });
  const words = text.split(/[,;\n]+/).map(w => w.trim()).filter(Boolean);
  words.forEach(w => {
    const wl = w.toLowerCase();
    if (!EXTRAS_KEYWORDS.some(e => e.keywords.some(k => wl.includes(k)))) {
      if (!matched.some(m => m.label === w))
        matched.push({ label: w, price: null });
    }
  });
  return matched;
}

function getTotal() {
  let sum = 0;
  document.querySelectorAll('#bookingForm input[type="checkbox"]:checked').forEach(cb => {
    sum += parseInt(cb.dataset.price);
  });
  const extras = parseExtras(document.getElementById('extras').value);
  extras.forEach(e => { if (e.price) sum += e.price; });
  return { sum, extras };
}

function updateTotal() {
  const { sum, extras } = getTotal();
  document.getElementById('totalDisplay').textContent = sum;
  const preview = document.getElementById('extrasPreview');
  preview.innerHTML = extras.map(e =>
    `<div class="extras-line"><span>${e.label}</span><span>${e.price !== null ? 'R' + e.price : 'Price TBD'}</span></div>`
  ).join('');
}

document.querySelectorAll('#bookingForm input[type="checkbox"]').forEach(cb => cb.addEventListener('change', updateTotal));
document.getElementById('extras').addEventListener('input', updateTotal);

// Set min date to today
document.getElementById('date').min = new Date().toISOString().split('T')[0];

document.getElementById('bookingForm').addEventListener('submit', async function(e) {
  e.preventDefault();
  const btn = document.getElementById('submitBtn');
  btn.disabled = true; btn.textContent = 'Submitting...';

  const services = [];
  document.querySelectorAll('#bookingForm input[type="checkbox"]:checked').forEach(cb => services.push(cb.value));
  const { sum, extras } = getTotal();
  const payment = document.getElementById('payment').value;

  const fd = new FormData();
  fd.append('Owner Name', document.getElementById('ownerName').value);
  fd.append('Email', document.getElementById('email').value);
  fd.append('Phone', document.getElementById('phone').value);
  fd.append('Pet Name', document.getElementById('petName').value);
  fd.append('Pet Type', document.getElementById('petType').value);
  fd.append('Pet Gender', document.getElementById('petGender').value);
  fd.append('Pet Age', document.getElementById('petAge').value);
  fd.append('Services', services.join(', '));
  fd.append('Date', document.getElementById('date').value);
  fd.append('Time', document.getElementById('time').value);
  fd.append('Extra Requests', document.getElementById('extras').value);
  fd.append('Payment Method', payment);
  fd.append('Final Price', 'R' + sum);

  try {
    const res = await fetch('https://formspree.io/f/mbdalorp', { method: 'POST', body: fd, headers: { Accept: 'application/json' } });
    if (res.ok) {
      let html = `<h2>JEZZY TRADES</h2><p class="subtitle">Pet Grooming Services</p><hr>`;
      html += `<div class="line"><span>Date</span><span>${document.getElementById('date').value}</span></div>`;
      html += `<div class="line"><span>Time</span><span>${document.getElementById('time').value}</span></div><hr>`;
      services.forEach(s => {
        const p = document.querySelector(`input[value="${s}"]`).dataset.price;
        html += `<div class="line"><span>${s}</span><span>R${p}</span></div>`;
      });
      if (extras.length) {
        html += `<hr>`;
        extras.forEach(e => {
          html += `<div class="line"><span>${e.label}</span><span>${e.price !== null ? 'R' + e.price : 'TBD'}</span></div>`;
        });
      }
      html += `<hr><div class="line total-line"><span>TOTAL</span><span>R${sum}</span></div>`;
      html += `<div class="paw">üêæ</div>`;
      html += `<button class="close-btn" onclick="document.getElementById('receiptOverlay').style.display='none'">Close</button>`;
      document.getElementById('receiptContent').innerHTML = html;
      document.getElementById('receiptOverlay').style.display = 'flex';

      if (payment === 'Pay Now') {
        setTimeout(() => { window.location.href = 'https://pay.yoco.com/jezzy-trades'; }, 3500);
      }
    } else { alert('Submission failed. Please try again.'); }
  } catch { alert('Network error. Please try again.'); }
  btn.disabled = false; btn.textContent = 'Confirm Booking';
});
</script>
</body>
</html>
    <script  src="./script.js"></script>

  </body>
  
</html>
